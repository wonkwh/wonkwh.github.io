<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title></title>

      

      
          <link rel="stylesheet" href="https://wonkwh.github.io/site.css">
      

      
      
    </head>

    <body class="hack dark main container">
        

<article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline">usage-official-swift-log</h1>
        <span class="muted">
    <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <circle cx="16" cy="16" r="14"/>
        <path d="M16 8 L16 16 20 20"/>
    </svg>
    <span>2 minute read</span>
    <svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z"/>
    </svg>

    Published: 2020-01-06
</span>
    </header>
    <div itemprop="articleBody">
      <p>Apple의 official swift-log package를 이용하여 os unified logging를 사용하는 방법</p>
<span id="continue-reading"></span><h3 id="configuration">Configuration</h3>
<ul>
<li>https://github.com/apple/swift-log</li>
<li>https://github.com/chrisaljoudi/swift-log-oslog</li>
</ul>
<p>swift-log의 oslog backend 패키지를 Package.swift에 추가</p>
<pre data-lang="swift" style="background-color:#2b303b;color:#c0c5ce;" class="language-swift "><code class="language-swift" data-lang="swift"><span>dependencies: [
</span><span>        .package(url: </span><span style="color:#a3be8c;">&quot;https://github.com/chrisaljoudi/swift-log-oslog.git&quot;</span><span>, from: </span><span style="color:#a3be8c;">&quot;0.2.1&quot;</span><span>)
</span><span>    ],
</span><span>targets: [
</span><span>    .target(
</span><span>        name: </span><span style="color:#a3be8c;">&quot;VExtensionUtility&quot;</span><span>,
</span><span>        dependencies: [
</span><span>            </span><span style="color:#a3be8c;">&quot;LoggingOSLog&quot;
</span><span>        ]
</span><span>    ),
</span></code></pre>
<h3 id="generate-log-class">generate Log class</h3>
<ul>
<li>다음과 같은 Wrapping class를 생성하면 조금더 편리하게 사용할 수 있다. </li>
</ul>
<pre data-lang="swift" style="background-color:#2b303b;color:#c0c5ce;" class="language-swift "><code class="language-swift" data-lang="swift"><span style="color:#65737e;">//
</span><span style="color:#65737e;">//  Log.swift
</span><span style="color:#65737e;">//
</span><span style="color:#65737e;">//  Created by kwanghyun.won` on 2020/01/06.
</span><span style="color:#65737e;">//
</span><span>
</span><span style="color:#b48ead;">import </span><span>Logging
</span><span style="color:#b48ead;">import </span><span>LoggingOSLog
</span><span>
</span><span style="color:#65737e;">/// Example:
</span><span style="color:#65737e;">///     Log.setup(subsystem: &quot;com.Vingle.DesignKitDemo&quot;, level: .debug)
</span><span style="color:#65737e;">///     Log.info(&quot;setup Log Complete!&quot;)
</span><span style="color:#b48ead;">public final class</span><span> Log {
</span><span>
</span><span>    </span><span style="color:#b48ead;">public static var</span><span> `</span><span style="color:#b48ead;">default</span><span>`: Logger = Logger(label: </span><span style="color:#a3be8c;">&quot;com.Vingle.app&quot;</span><span>, factory: LoggingOSLog.</span><span style="color:#b48ead;">init</span><span>)
</span><span>
</span><span>    </span><span style="color:#b48ead;">public class func </span><span>setup(subsystem: String, level: Logger.Level = .debug) {
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default </span><span>= Logger(label: subsystem, factory: LoggingOSLog.</span><span style="color:#b48ead;">init</span><span>)
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.logLevel = level
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">public extension</span><span> Log {
</span><span>    </span><span style="color:#b48ead;">static func </span><span>trace(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.trace(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>debug(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.debug(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>info(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.info(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>notice(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.notice(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>warning(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.warning(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>error(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.error(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">static func </span><span>critical(_ message: Logger.Message, functionName: String = #function, fileName: String = #file) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> className = fileName.extractClassName()
</span><span>        </span><span style="color:#b48ead;">self</span><span>.</span><span style="color:#b48ead;">default</span><span>.critical(</span><span style="color:#a3be8c;">&quot;</span><span>\(className)</span><span style="color:#a3be8c;">:</span><span>\(functionName) \(message)</span><span style="color:#a3be8c;">&quot;</span><span>)
</span><span>    }
</span><span>}
</span></code></pre>
<h3 id="usage">usage</h3>
<ul>
<li><code>AppDelegate.swift</code> 에 Log setting </li>
</ul>
<blockquote>
<p>Log.setup(subsystem: &quot;com.Vingle.DesignKitDemo&quot;, level: .debug)</p>
</blockquote>
<ul>
<li>그 이후 자유롭게 Log 사용 </li>
</ul>
<blockquote>
<p>Log.debug(&quot; debug message (variable)&quot;)</p>
</blockquote>
<h3 id="link">Link</h3>
<ul>
<li><a href="https://www.raywenderlich.com/605079-migrating-to-unified-logging-console-and-instruments">migrating-to-unified-logging-console-and-instruments</a> 
<ul>
<li>raywenderlich 의 os-log tutorial </li>
</ul>
</li>
</ul>

    </div>

    
        <footer>
            <hr>
            <p>
                
                    Published by Kwanghyun Won
                
                
                
                    and tagged
                    
                        <a href="https://wonkwh.github.io/tags/swift/">swift</a>
                        
                            
                                
                                    ,
                                
                            
                        
                    
                        <a href="https://wonkwh.github.io/tags/log/">log</a>
                        
                            
                                
                                    and
                                
                            
                        
                    
                        <a href="https://wonkwh.github.io/tags/spm/">spm</a>
                        
                            
                        
                    
                
            </p>
        </footer>
    
</article>


    </body>

</html>
