<!doctype html><html dir=auto lang=en><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><meta content="index, follow" name=robots><title>Introducing the Composition Root Pattern in a Swift Codebase</title><meta content="keyword1, keyword2, keyword3" name=keywords><meta name=description><meta content=cydave name=author><link href=https://wonkwh.github.io/posts/introducing-thecompositionroot-pattern/ rel=canonical><link href=https://wonkwh.github.io/css/includes/scroll-bar.css rel=stylesheet><link href=https://wonkwh.github.io/css/styles.css rel=stylesheet><link href=https://wonkwh.github.io/css/override.css rel=stylesheet><link href=https://wonkwh.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><noscript><style>#theme-toggle,.top-link{display:none}</style> <style>@media (prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:#dadadb;--secondary:#9b9c9d;--tertiary:#414244;--content:#c4c4c5;--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><body id=top><script>if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }</script><header class=header><nav class=nav><div class=logo><a title="Kei's KnowledgeBage (Alt + H)" accesskey=h href=https://wonkwh.github.io> Kei's KnowledgeBage </a><div class=logo-switches><button title="(Alt + T)" accesskey=t id=theme-toggle><svg viewbox="0 0 24 24" fill=none height=18 id=moon stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> <svg viewbox="0 0 24 24" fill=none height=18 id=sun stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=5></circle><line x1=12 x2=12 y1=1 y2=3></line><line x1=12 x2=12 y1=21 y2=23></line><line x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line x1=1 x2=3 y1=12 y2=12></line><line x1=21 x2=23 y1=12 y2=12></line><line x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg></button><ul class=lang-switch><li></ul></div></div><ul id=menu><li><a href=https://wonkwh.github.io/archive title=Archive> <span>Archive</span> </a><li><a href=https://wonkwh.github.io/tags title=Tags> <span>Tags</span> </a><li><a href=https://wonkwh.github.io/search title=Search> <span>Search</span> </a><li><a href=https://github.com/wonkwh target=_blank title=Github> <span>Github</span> <svg viewbox="0 0 24 24" fill=none height=12 shape-rendering=geometricPrecision stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2.5 width=12><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></svg> </a></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wonkwh.github.io>Home</a>Â Â»Â  <a href=https://wonkwh.github.io/posts/>Posts</a>Â Â»Â  <a href=https://wonkwh.github.io/posts/introducing-thecompositionroot-pattern/>Introducing the Composition Root Pattern in a Swift Codebase</a></div><h1 class=post-title>Introducing the Composition Root Pattern in a Swift Codebase</h1><div class=post-meta><span title="2024-11-15 00:00:00 +0000">2024-11-15</span>Â Â·Â 7 minÂ Â·Â cydave</div></header><div class=toc><details><summary title="(Alt + C)" accesskey=c><span class=details>Table of Contents</span></summary> <div class=inner><ul><li><a aria-label="Introduction to Dependency Injection" href=#introduction-to-dependency-injection>Introduction to Dependency Injection</a><li><a aria-label="Building the Dependency Graph" href=#building-the-dependency-graph>Building the Dependency Graph</a><li><a aria-label="The Composition Root Pattern Enters the Room" href=#the-composition-root-pattern-enters-the-room>The Composition Root Pattern Enters the Room</a> <ul><li><a aria-label="Using the Composition Root in an iOS App" href=#using-the-composition-root-in-an-ios-app>Using the Composition Root in an iOS App</a></ul><li><a aria-label="Sharing State Between Objects" href=#sharing-state-between-objects>Sharing State Between Objects</a><li><a aria-label="ì»¤ì§€ëŠ” ì»´í¬ì§€ì…˜ ë£¨íŠ¸ ì²˜ë¦¬í•˜ê¸°" href=#keojineun-keompojisyeon-ruteu-ceorihagi>ì»¤ì§€ëŠ” ì»´í¬ì§€ì…˜ ë£¨íŠ¸ ì²˜ë¦¬í•˜ê¸°</a><li><a aria-label="ë§ˆë¬´ë¦¬ ìƒê°" href=#mamuri-saenggag>ë§ˆë¬´ë¦¬ ìƒê°</a><li><a aria-label="ì¶”ê°€ ë ˆí¼ëŸ°ìŠ¤" href=#cuga-repeoreonseu>ì¶”ê°€ ë ˆí¼ëŸ°ìŠ¤</a></ul></div></details></div><div class=post-content><p><code>CompositionRoot</code> ë¥¼ SwiftCodeBase ì— ì ìš©í•˜ê¸°</p><span id=continue-reading></span><ul><li>ì›ê¸€: https://simonbs.dev/posts/introducing-the-composition-root-pattern-in-a-swift-codebase/</ul><h2 id=introduction-to-dependency-injection>Introduction to Dependency Injection<a aria-hidden=true class=anchor hidden href=#introduction-to-dependency-injection>#</a></h2><ul><li><p>2022ë…„ ì´ˆ, ì €ëŠ” Swiftì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì ‘ê·¼ ë°©ì‹ì„ íƒìƒ‰í•˜ë‹¤ê°€ <a href=https://blog.ploeh.dk/>Mark Seemann</a>ì´ <a href=https://www.amazon.com/gp/product/1935182501>.NETì˜ ì˜ì¡´ì„± ì£¼ì…</a>ì—ì„œ ì†Œê°œí•œ Composition Root íŒ¨í„´ì„ ì ‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><li><p>ê·¸ ì´í›„ë¡œ ì—¬ëŸ¬ Swift ì½”ë“œë² ì´ìŠ¤ì— Composition Root íŒ¨í„´ì„ ë„ì…í–ˆê³  ë§¤ìš° ìœ ìš©í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><li><p>ì´ ê¸€ì—ì„œëŠ” Swift ì½”ë“œë² ì´ìŠ¤ì— ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë¥¼ ë„ì…í•˜ê³  iOS í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ì˜ì¡´ì„± ì£¼ì…ì— ëŒ€í•œ ê°„ëµí•œ ê°œìš”ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p><li><p>ì˜ì¡´ì„± ì£¼ì…ì€ ê°ì²´ê°€ ì§ì ‘ ì¢…ì†ì„±ì„ ìƒì„±í•˜ì§€ ì•Šê³  ì™¸ë¶€ ì†ŒìŠ¤ì—ì„œ ì¢…ì† ê°ì²´ë¥¼ ê°ì²´ì— ì „ë‹¬í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.</p><li><p>Consider the followingÂ <code>MovieService</code>Â type that loads movies and stores them in aÂ <code>MovieRepository</code>.</p> <pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span>  </span><span style=color:#b48ead>struct</span><span> MovieRepository {
</span><span>    </span><span style=color:#b48ead>func </span><span>add(_ movie: Movie) {
</span><span>    ...
</span><span>    }
</span><span>  }
</span><span>  
</span><span>  </span><span style=color:#b48ead>struct</span><span> MovieService {
</span><span>    </span><span style=color:#b48ead>let</span><span> repository = MovieRepository()
</span><span>  
</span><span>    </span><span style=color:#b48ead>func </span><span>loadMovies() {
</span><span>    ...
</span><span>    }
</span><span>  }
</span><span>  ```
</span><span>
</span></code></pre><li><p><code>MovieService</code> ëŠ” ì´ˆê¸°í™” ì‹œ ìƒì„±ë˜ëŠ” <code>MovieRepository</code>ì— ëŒ€í•œ ì¢…ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ ë‘ ìœ í˜• ê°„ì˜ ê¸´ë°€í•œ ê²°í•©ì€ ì½”ë“œë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸í•  ë•Œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code>MovieRepository</code>ëŠ” ì˜í™”ë¥¼ ë””ìŠ¤í¬ì— ì €ì¥í•  ìˆ˜ ìˆëŠ”ë°, ì´ëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ë°”ëŒì§í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><li><p>ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p><li><p>ì½”ë“œë² ì´ìŠ¤ë¥¼ ì„¸ ê°€ì§€ ë³€ê²½í–ˆìŠµë‹ˆë‹¤:</p> <ul><li><ol><li><code>ì˜í™” ì €ì¥ì†Œ</code> í”„ë¡œí† ì½œì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</ol><li><ol start=2><li>ì´ì „ <code>MovieRepository</code> êµ¬í˜„ì˜ ì´ë¦„ì„ <code>DiskMovieRepository</code>ë¡œ ë³€ê²½í•˜ì—¬ ì´ì œ <code>MovieRepository</code> í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.</ol><li><ol start=3><li>ì´ì œ <code>MovieService</code>ëŠ” êµ¬ì²´ì ì¸ êµ¬í˜„ì´ ì•„ë‹Œ <code>MovieRepository</code> í”„ë¡œí† ì½œì— ì˜ì¡´í•©ë‹ˆë‹¤.</ol></ul><li><p>ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ <code>MovieService</code>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p><li></ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span> </span><span style=color:#b48ead>let</span><span> repository = DiskMovieRepository()
</span><span> </span><span style=color:#b48ead>let</span><span> service = MovieService(repository: repository)
</span></code></pre><ul><li>ì´ì œ ë¦¬í¬ì§€í† ë¦¬ëŠ” ìƒì„±ìë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì— ì£¼ì…ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ <code>MovieService</code>ì— ì–´ë–¤ ì¢…ì†ì„±ì´ ìˆëŠ”ì§€ ëª…í™•íˆ ì•Œ ìˆ˜ ìˆê³  ë‹¤ì–‘í•œ ìš”êµ¬ ì‚¬í•­ì„ ìˆ˜ìš©í•˜ê¸° ìœ„í•´ ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„ì„ ì‰½ê²Œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ ë™ì˜ìƒì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li>ì´ ê¸€ì—ì„œëŠ” ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ëŠ” ì´ë‹ˆì…œë¼ì´ì € ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ê³  ìˆìŠµë‹ˆë‹¤. ë©”ì„œë“œ ì£¼ì…ê³¼ í”„ë¡œí¼í‹° ì£¼ì…ì´ë¼ëŠ” ë‹¤ë¥¸ ìœ í˜•ì˜ ì˜ì¡´ì„± ì£¼ì…ë„ ìˆë‹¤ëŠ” ì ì— ì£¼ëª©í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.</ul><h2 id=building-the-dependency-graph>Building the Dependency Graph<a aria-hidden=true class=anchor hidden href=#building-the-dependency-graph>#</a></h2><ul><li><p>ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ ì¢…ì†ì„±ì„ ì£¼ì…í•  ë•ŒëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê° ë…¸ë“œê°€ ì¢…ì†ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ ê·¸ë˜í”„ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ì „ ì˜ˆì‹œë¥¼ í™•ì¥í•˜ì—¬ ì´ë¥¼ ì„¤ëª…í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p> <pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>class</span><span> WatchlistViewController: UIViewController {
</span><span>  </span><span style=color:#b48ead>init</span><span>(userService: UserService, movieService: MovieService) {
</span><span>  ...
</span><span>  }
</span><span>}
</span><span>
</span><span style=color:#b48ead>struct</span><span> UserService {
</span><span>  </span><span style=color:#b48ead>let</span><span> networkClient: NetworkClient
</span><span>}
</span><span>
</span><span style=color:#b48ead>struct</span><span> MovieService {
</span><span>  </span><span style=color:#b48ead>let</span><span> repository: MovieRepository
</span><span>  </span><span style=color:#b48ead>let</span><span> networkClient: NetworkClient
</span><span>}
</span></code></pre> <ul><li><p><code>WatchlistViewController</code> ëŠ” ë‘ ê°œì˜ ì¢…ì†ì„±ì„ ê°€ì§€ê³  ìˆê³ , ê·¸ ì¢…ì†ì„±ì—ëŠ” ë‹¤ì‹œ ìì²´ ì¢…ì†ì„±ì´ ìˆê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” ê°ì²´ ê·¸ë˜í”„ë¥¼ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ê·¸ë˜í”„ë¥¼ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <img alt src=https://simonbs.dev/images/posts/introducing-the-composition-root-pattern-in-a-swift-codebase/dependency-graph.png></p><li><p>ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ ì¢…ì†ì„±ì„ ì£¼ì…í•´ì•¼ í•˜ë¯€ë¡œ ì´ëŸ¬í•œ ì¢…ì†ì„±ì„ ìƒì„±í•˜ê¸° ìœ„í•´ ì™¸ë¶€ ì†ŒìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ ì™¸ë¶€ ì†ŒìŠ¤ì—ë„ ì¢…ì†ì„±ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¢…ì†ì„± ê·¸ë˜í”„ê°€ ì»¤ì§€ê³  ì§ˆë¬¸ì´ ìƒê¹ë‹ˆë‹¤:</p></ul></ul><blockquote><p>How do we construct this graph and where in our codebase do we do it? ì´ ê·¸ë˜í”„ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ì½”ë“œë² ì´ìŠ¤ì˜ ì–´ë””ì—ì„œ êµ¬ì„±í•´ì•¼ í• ê¹Œìš”?</blockquote><ul><li><a href=https://github.com/Swinject/Swinject>ë§ì€</a> <a href=https://github.com/square/Cleanse>ì˜¤í”ˆ ì†ŒìŠ¤</a> <a href=https://github.com/uber/needle>Swift</a> <a href=https://github.com/hmlongco/Factory>í”„ë ˆì„ì›Œí¬</a> <a href=https://github.com/pointfreeco/swift-dependencies>ê·¸ ì£¼ì†Œ</a> <a href=https://github.com/scribd/Weaver>ì´ëŸ¬í•œ ì§ˆë¬¸</a> ë“±ì´ ìˆìŠµë‹ˆë‹¤.<li>ì´ëŸ¬í•œ í”„ë ˆì„ì›Œí¬ ì¤‘ ì¼ë¶€ëŠ” ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„±ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ìŠì–´ë²„ë¦¬ë©´ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë³€í˜•ëœ ì˜ì¡´ì„± ì£¼ì…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<li>ì‹¤ì œë¡œ SwiftUIì˜ <code>@EnvironmentObject</code>ë„ ë™ì¼í•œ ë™ì‘ì„ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</ul><p>ë‹¤ìŒ SwiftUI view ë¥¼ ë³´ë©´:<pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>struct</span><span> ContentView: View {
</span><span style=color:#b48ead>@EnvironmentObject var</span><span> movieService: MovieService
</span><span>
</span><span style=color:#b48ead>var</span><span> body: some View {
</span><span>  Text(</span><span style=color:#a3be8c>"</span><span>\(movieService.count) </span><span style=color:#a3be8c>movies"</span><span>)
</span><span>}
</span><span>}
</span></code></pre><ul><li><code>ContentView</code>ëŠ” ë·°ì˜ ì¡°ìƒ ì¤‘ í•˜ë‚˜ì— <code>environmentObject()</code> ë·° ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚½ì…í•´ì•¼ í•˜ëŠ” <code>MovieService</code>ì— ëŒ€í•œ ì¢…ì†ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë¥¼ ìŠì–´ë²„ë¦¬ë©´ ëŸ°íƒ€ì„ì— ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤:</ul><blockquote><p>Fatal error: No ObservableObject of type MovieService found. A View.environmentObject(_:) for MovieService may be missing as an ancestor of this view</blockquote><ul><li>ì´ëŸ¬í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ì™€ ê·¸ì— ë”°ë¥¸ ì•± ì¶©ëŒì€ ì˜ëª» ì„¤ê³„ëœ ì˜ì¡´ì„± ì£¼ì… ì „ëµì˜ ê²°ê³¼ì´ë¯€ë¡œ í”¼í•´ì•¼ í•©ë‹ˆë‹¤.<li>ëŒ€ì‹  ëŸ°íƒ€ì„ ì˜¤ë¥˜ë³´ë‹¤ ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ë¥¼ ìš°ì„ ì‹œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•´ì•¼ í•©ë‹ˆë‹¤.<li>ë˜í•œ ì¢…ì†ì„± ì£¼ì… ì „ëµì„ ì„ íƒí•˜ëŠ” ê²ƒì€ ì•„í‚¤í…ì²˜ì  ê²°ì •ì´ë©°, ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ì— ëŒ€í•œ ê°•ë ¥í•œ ì¢…ì†ì„±ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ ìœ„í•´ íƒ€ì‚¬ í”„ë ˆì„ì›Œí¬ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.</ul><h2 id=the-composition-root-pattern-enters-the-room>The Composition Root Pattern Enters the Room<a aria-hidden=true class=anchor hidden href=#the-composition-root-pattern-enters-the-room>#</a></h2><ul><li><a href=https://blog.ploeh.dk/>ë§ˆí¬ ì‹œë§Œ</a>ì€ ìì‹ ì˜ ì €ì„œ <a href=https://www.amazon.com/gp/product/1935182501>.NETì˜ ì˜ì¡´ì„± ì£¼ì…</a>ì—ì„œ ê°ì²´ ê·¸ë˜í”„ë¥¼ ì–´ë””ì— êµ¬ì„±í• ì§€ì— ëŒ€í•œ ì§ˆë¬¸ì— ë‹µí•˜ê¸° ìœ„í•´ ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë¥¼ ì‚¬ìš©í•  ê²ƒì„ ì œì•ˆí•©ë‹ˆë‹¤. ì±… ì œëª©ì— '.NET'ì´ ë“¤ì–´ê°„ë‹¤ê³  í•´ì„œ ê²ë¨¹ì§€ ë§ˆì„¸ìš”. ì´ íŒ¨í„´ì„ Swift ğŸ˜Šì— ì ìš©í•˜ê¸° ìœ„í•œ ê²ƒì´ë‹ˆê¹Œìš”.<li>ì»´í¬ì§€ì…˜ ë£¨íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì£¼ì…ë˜ëŠ” ëª¨ë“  ì¢…ì†ì„±ì„ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ 'CompositionRoot'ë¼ëŠ” ì—´ê±°í˜•ì„ ë§Œë“¤ê³  ê° ì¢…ì†ì„±ì„ ì •ì  í”„ë¡œí¼í‹°ë¡œ ë‚˜ì—´í•˜ë©´ ë©ë‹ˆë‹¤. ê°ì²´ì— ì¢…ì†ì„±ì´ ìˆì„ ë•Œë§ˆë‹¤ í•´ë‹¹ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>enum</span><span> CompositionRoot {
</span><span style=color:#b48ead>static var</span><span> watchlistViewController: WatchlistViewController {
</span><span>  WatchlistViewController(
</span><span>    userService: userService,
</span><span>    movieService: movieService
</span><span>  )
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> userService: UserService {
</span><span>  UserService(networkClient: networkClient)
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> movieService: MovieService {
</span><span>  MovieService(
</span><span>    repository: movieRepository, 
</span><span>    networkClient: networkClient
</span><span>  )
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> movieRepository: MovieRepository {
</span><span>  DiskMovieRepository()
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> networkClient: NetworkClient {
</span><span>  NetworkClient()
</span><span>}
</span><span>}
</span></code></pre><ul><li><code>CompositionRoot</code> ì—´ê±°í˜•ì€ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ê°€ ì—´ê±°í˜• ìì²´ì¸ ê°ì²´ ê·¸ë˜í”„ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.<li>ì´ ì»´í¬ì§€ì…˜ ë£¨íŠ¸ëŠ” ë§¤ìš° ì‘ê¸° ë•Œë¬¸ì— í”„ë¡œë•ì…˜ì—ì„œ ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œë¥¼ ë³´ê³  ì‹¶ë‹¤ë©´ <a href=https://shape.dk/>Shape</a>ì—ì„œ ê°œë°œí•œ <a href=https://github.com/shapehq/tartelet/blob/main/Tartelet/Sources/CompositionRoot.swift#L29>ì•±ì—ì„œ ì´ ì»´í¬ì§€ì…˜ ë£¨íŠ¸ ë³´ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.<li>ì´ì œ <code>CompositionRoot</code> ë¥¼ ë°°ì¹˜í•˜ê³  ê°ì²´ ê·¸ë˜í”„ê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€ ì§€ì •í–ˆìœ¼ë¯€ë¡œ ì´ì œ 'ì»´í¬ì§€ì…˜ ë£¨íŠ¸' ìœ í˜•ì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì¢…ì†ì„±ì„ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</ul><h3 id=using-the-composition-root-in-an-ios-app>Using the Composition Root in an iOS App<a aria-hidden=true class=anchor hidden href=#using-the-composition-root-in-an-ios-app>#</a></h3><ul><li><a href=https://blog.ploeh.dk/2011/07/28/CompositionRoot/>Seemann</a>ì— ë”°ë¥´ë©´ ê°ì²´ ê·¸ë˜í”„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì ì— ìµœëŒ€í•œ ê°€ê¹ê²Œ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ ì¢…ì†ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì™¸ë¶€ ì†ŒìŠ¤ì— ì˜ì¡´í•˜ëŠ” ê°ì²´ì˜ ë‹¹ì—°í•œ ê²°ê³¼ì…ë‹ˆë‹¤.<li>iOS ì•±ì—ì„œëŠ” <code>AppDelegate</code>ì™€ ì”¬ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ë¡œ ê°„ì£¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ê° ì¥ë©´ ë¸ë¦¬ê²Œì´íŠ¸ê°€ ê·¸ ìì²´ë¡œ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ì´ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ê°€ ì—†ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<li><code>WatchlistViewController</code>ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í‘œì‹œí•˜ëŠ” ì¥ë©´ì´ í•„ìš”í•˜ë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì”¬ì˜ ë£¨íŠ¸ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” UINavigationControllerì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë¯€ë¡œ <code>CompositionRoot</code>ë¥¼ ìˆ˜ì •í•˜ì—¬ <code>UINavigationController</code>ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.</ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>enum</span><span> CompositionRoot {
</span><span style=color:#b48ead>static var</span><span> rootViewController: UIViewController {
</span><span>  UINavigationController(
</span><span>    rootViewController: watchlistViewController
</span><span>  )
</span><span>}
</span><span>
</span><span>...
</span><span>}
</span></code></pre><ul><li><code>ì»´í¬ì§€ì…˜ ë£¨íŠ¸</code>ê°€ ë£¨íŠ¸ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë…¸ì¶œí•˜ë©´ ì´ì œ ë‚¨ì€ ì‘ì—…ì€ ì”¬ ë¸ë¦¬ê²Œì´íŠ¸ì—ì„œ <code>rootViewController</code> í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒë¿ì…ë‹ˆë‹¤.</ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>class</span><span> SceneDelegate: UIResponder, UIWindowSceneDelegate {
</span><span style=color:#b48ead>func </span><span>scene(
</span><span>  _ scene: UIScene, 
</span><span>  willConnectTo session: UISceneSession, 
</span><span>  options connectionOptions: UIScene.ConnectionOptions
</span><span>) {
</span><span>  </span><span style=color:#b48ead>let</span><span> windowScene = scene as! UIWindowScene
</span><span>  window = UIWindow(windowScene: windowScene)
</span><span>  window?.rootViewController = CompositionRoot.rootViewController
</span><span>  window?.makeKeyAndVisible()
</span><span>}
</span><span>}
</span></code></pre><h2 id=sharing-state-between-objects>Sharing State Between Objects<a aria-hidden=true class=anchor hidden href=#sharing-state-between-objects>#</a></h2><ul><li><code>ì»´í¬ì§€ì…˜ ë£¨íŠ¸</code>ëŠ” ì¢…ì†ì„±ì„ ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.<li>ì•„ë˜ ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ <code>userService</code> ë° <code>movieService</code> í”„ë¡œí¼í‹°ê°€ ë°˜í™˜í•˜ëŠ” ì„œë¹„ìŠ¤ì— ê°ê° ê³ ìœ í•œ <code>NetworkClient</code> ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li>ì´ëŠ” <code>ë„¤íŠ¸ì›Œí¬ í´ë¼ì´ì–¸íŠ¸</code>ê°€ ì ‘ê·¼ ì‹œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²Œí„°ë¡œë§Œ êµ¬í˜„ë˜ì–´ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>enum</span><span> CompositionRoot {
</span><span>...
</span><span>
</span><span style=color:#b48ead>private static var</span><span> userService: UserService {
</span><span>  UserService(networkClient: networkClient)
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> movieService: MovieService {
</span><span>  MovieService(
</span><span>    repository: movieRepository, 
</span><span>    networkClient: networkClient
</span><span>  )
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static var</span><span> networkClient: NetworkClient {
</span><span>  NetworkClient()
</span><span>}
</span><span>
</span><span>...
</span><span>}
</span></code></pre><ul><li>ì´ ë™ì‘ì€ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ê°ì²´ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°”ëŒì§í•©ë‹ˆë‹¤. í•„ìš”í•  ë•Œ ìƒì„±í•˜ê³  ê°€ëŠ¥í•œ í•œ ë¹¨ë¦¬ íê¸°í•˜ë©´ ë©ë‹ˆë‹¤.<li>ê·¸ëŸ¬ë‚˜ ë‘ ì¢…ì†ì„± ê°„ì— ìƒíƒœë¥¼ ê³µìœ í•´ì•¼ í•  ë•ŒëŠ” ì´ ì ‘ê·¼ ë°©ì‹ì´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<li>ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ íì— ëŒ€ê¸°ì‹œí‚¤ëŠ” ì‚¬ìš©ì ì •ì˜ ë¡œì§ì´ ìˆê³  ê°ì²´ê°€ <code>NetworkClient</code>ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•´ì•¼ í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒìƒí•´ ë´…ì‹œë‹¤.<li>ì´ ê²½ìš° <code>CompositionRoot</code>ì˜ <code>networkClient</code> ì†ì„±ì„ ë³€ê²½í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì €ì¥í•˜ì—¬ ì†ì„±ì„ ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•  ê²ƒì…ë‹ˆë‹¤. ë‹¤í–‰íˆë„ ì´ ì‘ì—…ì€ <code>networkClient</code>ë¥¼ ìƒìˆ˜ë¡œ ë§Œë“œëŠ” ê²ƒë§Œí¼ì´ë‚˜ ê°„ë‹¨í•©ë‹ˆë‹¤.</ul><pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#b48ead>enum</span><span> CompositionRoot {
</span><span>...
</span><span>
</span><span style=color:#b48ead>private static let</span><span> networkClient = NetworkClient()
</span><span>
</span><span>...
</span><span>}
</span></code></pre><h2 id=keojineun-keompojisyeon-ruteu-ceorihagi>ì»¤ì§€ëŠ” ì»´í¬ì§€ì…˜ ë£¨íŠ¸ ì²˜ë¦¬í•˜ê¸°<a aria-hidden=true class=anchor hidden href=#keojineun-keompojisyeon-ruteu-ceorihagi>#</a></h2><ul><li><p>ì»´í¬ì§€ì…˜ ë£¨íŠ¸ íŒ¨í„´ì˜ ì ì‘ì— ëŒ€í•´ ë…¼ì˜í•  ë•Œ ì‚¬ëŒë“¤ì´ ì£¼ë¡œ ìš°ë ¤í•˜ëŠ” ê²ƒ ì¤‘ í•˜ë‚˜ëŠ” ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ <code>CompositionRoot</code> ì—´ê±°í˜•ì´ ë„ˆë¬´ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><li><p>ì´ëŠ” íƒ€ë‹¹í•œ ìš°ë ¤ì´ë©°, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì´ë¥¼ ë³„ë„ì˜ íŒŒì¼ë¡œ ë¶„í• í•˜ì—¬ ê° íŒŒì¼ë§ˆë‹¤ <code>CompositionRoot</code>ì— extensionë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><li><p>ì¼ë°˜ì ìœ¼ë¡œ ì´ëŸ¬í•œ í™•ì¥ì€ ê°ì²´ ê·¸ë˜í”„ì—ì„œ ì•±ì˜ íŠ¹ì • ë„ë©”ì¸ì´ë‚˜ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì„ ë‹¤ë£¹ë‹ˆë‹¤.</p><li><p>ì˜ˆë¥¼ ë“¤ì–´, ì•±ì˜ ì˜í™” ë„ë©”ì¸ê³¼ ê´€ë ¨ëœ ëª¨ë“  ê°ì²´ë¥¼ í¬í•¨í•˜ëŠ” <code>Movies</code> ì—´ê±°í˜•ì„ ì¶”ê°€í•˜ëŠ” extensionë¥¼ <code>CompositionRoot</code>ì— ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p> <pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#65737e>/// ğŸ“„ CompositionRoot+Movies.swift
</span><span style=color:#b48ead>extension</span><span> CompositionRoot {
</span><span style=color:#b48ead>enum</span><span> Movies {
</span><span>  </span><span style=color:#b48ead>func </span><span>moviesService(networkClient: NetworkClient) {
</span><span>    MovieService(
</span><span>      repository: movieRepository, 
</span><span>      networkClient: networkClient
</span><span>    )
</span><span>  }
</span><span>  
</span><span>  </span><span style=color:#b48ead>private static var</span><span> movieRepository: MovieRepository {
</span><span>    DiskMovieRepository()
</span><span>  }
</span><span>}
</span><span>}
</span></code></pre> <ul><li>ì˜¤ë¸Œì íŠ¸ëŠ” ì—¬ì „íˆ <code>CompositionRoot</code>ë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ <code>MovieService</code>ë¥¼ ë…¸ì¶œí•˜ê³  <code>NetworkClient</code>ì˜ ê³µìœ  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.</ul> <pre class=language-swift data-lang=swift style=color:#c0c5ce;background-color:#2b303b><code class=language-swift data-lang=swift><span style=color:#65737e>/// ğŸ“„ CompositionRoot.swift
</span><span style=color:#b48ead>enum</span><span> CompositionRoot {
</span><span>...
</span><span>
</span><span style=color:#b48ead>var</span><span> movieService: MovieService {
</span><span>  Movies.movieService(networkClient: networkClient)
</span><span>}
</span><span>
</span><span style=color:#b48ead>private static let</span><span> networkClient = NetworkClient()
</span><span>}
</span></code></pre></ul><h2 id=mamuri-saenggag>ë§ˆë¬´ë¦¬ ìƒê°<a aria-hidden=true class=anchor hidden href=#mamuri-saenggag>#</a></h2><ul><li>2022ë…„ ì´ˆë¶€í„° ì €ëŠ” ëŒ€ë¶€ë¶„ì˜ ë¶€ì—… í”„ë¡œì íŠ¸ì— ì»´í¬ì§€ì…˜ ë£¨íŠ¸ íŒ¨í„´ì„ ë„ì…í–ˆê³ , <a href=https://shape.dk/>Shape</a>ì—ì„œ ì¼í•˜ê³  ìˆëŠ” ëª‡ëª‡ í”„ë¡œì íŠ¸ì—ë„ ë„ì…í–ˆìŠµë‹ˆë‹¤.<li>ì˜ì¡´ì„± ì£¼ì…ê³¼ ì»´í¬ì§€ì…˜ ë£¨íŠ¸ íŒ¨í„´ì„ ë„ì…í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ëœ ê¸´ë°€í•˜ê²Œ ê²°í•©ë˜ì–´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code>MovieService</code>ë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ <code>MovieRepository</code>ì˜ ëª¨ì˜ êµ¬í˜„ì„ ìƒì„±í•˜ê³  <code>MovieService</code>ë¥¼ ì´ˆê¸°í™”í•  ë•Œ ì´ë¥¼ ì „ë‹¬í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.<li>ë˜í•œ, [Medium]ì—ì„œ ì„¤ëª…í•œ ì „ëµ(https://medium.engineering/evolution-of-the-medium-ios-app-architecture-8b6090f4508e)ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ìì²´ Swift íŒ¨í‚¤ì§€ë¡œ ì˜®ê¸°ë©´ í˜¸ìŠ¤íŠ¸ ì•±ì„ ë§¤ìš° ì–‡ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li>ì œ í”„ë¡œì íŠ¸ì— ì»´í¬ì§€ì…˜ ë£¨íŠ¸ íŒ¨í„´ì„ ë„ì…í•œ í›„, ë©”ì¸ íƒ€ê¹ƒì—ëŠ” ë³´í†µ ì•± ë¸ë¦¬ê²Œì´íŠ¸, ì”¬ ë¸ë¦¬ê²Œì´íŠ¸, ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë§Œ ê±°ì˜ í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.<li>ë©”ì¸ íƒ€ê¹ƒì— ì½”ë“œê°€ ê±°ì˜ í¬í•¨ë˜ì–´ ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒì€ í”„ë¡œì íŠ¸ì— <em>Dev Apps</em> ë¥¼ ë„ì…í•˜ê¸° ìœ„í•œ í›Œë¥­í•œ ì„¤ì •ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê°œë°œì ì•±(https://medium.com/airbnb-engineering/designing-for-productivity-in-a-large-scale-ios-application-9376a430a0bf)ì€ ê°œë°œìê°€ ê°œë°œ ì¤‘ì— íŠ¹ì • ê¸°ëŠ¥ì„ ë°˜ë³µí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì•±ì…ë‹ˆë‹¤.<li>ì´ëŸ¬í•œ ì•±ì€ ì•±ì˜ íŠ¹ì • ë¶€ë¶„ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ë©”ì¸ íƒ€ê²Ÿë³´ë‹¤ ì ì€ ì½”ë“œë¥¼ í¬í•¨í•˜ë¯€ë¡œ ì»´íŒŒì¼ ì‹œê°„ì´ ë‹¨ì¶•ë˜ë¯€ë¡œ ê°œë°œ ì¤‘ ë°˜ë³µ ì‘ì—…ì„ ë” ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<li>ê°œë°œ ì•± ë¹Œë“œëŠ” <a href=https://github.com/yonaskolb/XcodeGen>XcodeGen</a>ì„ ì‚¬ìš©í•˜ì—¬ Xcode í”„ë¡œì íŠ¸ì— ìƒˆ ëŒ€ìƒì„ ì¶”ê°€í•˜ê³  ì•±ì„ êµ¬ì„±í•˜ëŠ” ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ê°„ë‹¨í•´ì§‘ë‹ˆë‹¤.<li>ì´ í¬ìŠ¤íŒ…ì„ ì½ê³  Swift ì½”ë“œë² ì´ìŠ¤ì— ì»´í¬ì§€ì…˜ ë£¨íŠ¸ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì´ ê¶ê¸ˆí•˜ë‹¤ë©´, ì œê°€ ì¼í•˜ë©´ì„œ ì‘ì—…í•˜ê³  ìµœê·¼ì— ì˜¤í”ˆì†ŒìŠ¤í™”í•œ ì•±ì¸ <a href=https://github.com/shapehq/tartelet>Tartelet ì•±</a>ì˜ <a href=https://github.com/shapehq/tartelet/blob/main/Tartelet/Sources/CompositionRoot.swift>CompositionRoot.swift</a> íŒŒì¼ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</ul><h2 id=cuga-repeoreonseu>ì¶”ê°€ ë ˆí¼ëŸ°ìŠ¤<a aria-hidden=true class=anchor hidden href=#cuga-repeoreonseu>#</a></h2><ul><li><a href="https://www.youtube.com/watch?v=bmIW1skJQFo">Swift Connection 2023 - Simon B. StÃ¸vring. - Achieving Loose Coupling with Pure Dependency Injection - YouTube</a> <ul><li><a href=https://github.com/shapehq/CoffeeShopsExample>GitHub - shapehq/CoffeeShopsExample: Example project showing how Dependency Injection along with the Composition Root pattern can be introduced in a SwiftUI codebase.</a><li>ìœ„ ê¸€ì€ ì“´ ì €ìì˜ #dependancyInjection , #compositionRoot ì— ëŒ€í•œ ì»¨í¼ëŸ°ìŠ¤ ì™€ í•´ë‹¹ ìë£Œ...</ul><li>https://www.youtube.com/watch?v=lx3-KDRORyo&list=PLQ_uTU3EyV1TsXYHGaB11Y4-owo5sHQwY <ul><li>#dependancyInjection ì— ëŒ€í•œ youtube playlist</ul></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wonkwh.github.io/tags/swift/>swift</a><li><a href=https://wonkwh.github.io/tags/uikit/>uikit</a><li><a href=https://wonkwh.github.io/tags/composition-root/>composition_root</a><li><a href=https://wonkwh.github.io/tags/dependancy-injection/>dependancy_injection</a><li><a href=https://wonkwh.github.io/tags/protocol/>protocol</a><li><a href=https://wonkwh.github.io/tags/design-pattern/>design_pattern</a></ul><nav class=paginav><a class=prev href=https://wonkwh.github.io/posts/fundamentals-of-typedrivencode-part1/> <span class=title>Â« Prev</span> <br> <span>Fundamentals of type-driven code part1</span> </a></nav></footer></article></main><footer class=footer><span>Â© 2025 <a href=https://wonkwh.github.io>cydave</a></span><span> Powered by <a rel="noopener noreferrer" href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/cydave/zola-theme-papermod rel=noopener target=_blank>PaperMod</a> </span></footer><a aria-label="go to top" title="Go to Top (Alt + G)" accesskey=g class=top-link href=#top id=top-link> <svg viewbox="0 0 12 6" fill=currentColor xmlns=http://www.w3.org/2000/svg><path d="M12 6H0l6-6z"/></svg> </a><script>let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });</script><script>var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };</script><script>document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })</script><script>document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';
        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                var content = codeblock.textContent;
                if(codeblock.firstChild.tagName == 'TABLE') {
                    content = Array(...codeblock.firstChild.getElementsByTagName('span')).map((span) => { return span.textContent; }).join('');
                }
                navigator.clipboard.writeText(content);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            // td containing LineNos
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            // table containing LineNos and code
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            // code blocks not having highlight as parent class
            codeblock.parentNode.appendChild(copybutton);
        }
    });</script>